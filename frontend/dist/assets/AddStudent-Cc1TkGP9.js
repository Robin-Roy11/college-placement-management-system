import{r as t,j as a,b as u,B as c}from"./index-DY6_L8mx.js";import{C as B}from"./Toast-BiHiBLKG.js";import{M as C}from"./Modal-Dh_GEXQH.js";import{A as E}from"./AddUserTable-uYv71X-1.js";import"./ThemeProvider-drDcQILd.js";import"./useTimeout-DhsTg0sU.js";import"./TransitionWrapper-CvWS9HOT.js";import"./useEventCallback-zDNivz7F.js";import"./Button-Bfb7_xSF.js";import"./Button-DG37ih-c.js";import"./hasClass-DRa_Ep_n.js";import"./Table-BELEfMyQ.js";import"./TablePlaceholder-CikpisE7.js";import"./hook-Cwc5nPkN.js";import"./Placeholder-C-wkdveg.js";import"./Col-DXwIZm6T.js";function Q(){const[S,w]=t.useState([]),[x,D]=t.useState(!0),[y,r]=t.useState(!1),[A,n]=t.useState(""),[p,l]=t.useState(!1),[i,f]=t.useState(null),d=async()=>{try{const e=await u.get(`${c}/admin/student-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?w(e.data.studentUsers):console.warn("Response does not contain studentUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{D(!1)}};t.useEffect(()=>{d()},[]);const[b,M]=t.useState(!1),[m,T]=t.useState({first_name:"",email:"",number:"",password:""}),U=e=>T({...m,[e.target.name]:e.target.value}),j=e=>{f(e),l(!0)},h=async()=>{var e,s;try{const o=await u.post(`${c}/admin/student-delete-user`,{email:i},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o.data&&(n(o.data.msg),r(!0),d())}catch(o){console.log("student => confirmDelete ==> ",o),n((s=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:s.msg),r(!0)}l(!1)},g=()=>{l(!1),f(null)},$=async e=>{e.preventDefault();try{const s=await u.post(`${c}/admin/student-add-user`,m,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s.data&&(n(s.data.msg),r(!0),d())}catch(s){console.log("handleSubmit => Mangement.jsx ==> ",s)}};return a.jsxs(a.Fragment,{children:[a.jsx(B,{show:y,onClose:()=>r(!1),message:A,delay:3e3,position:"bottom-end"}),a.jsx(E,{users:S,loading:x,handleDeleteUser:j,formOpen:b,setFormOpen:M,data:m,handleDataChange:U,handleSubmit:$,showModal:p,closeModal:g,confirmDelete:h,userToDelete:i,userToAdd:"Student",handleApproveStudent:null}),a.jsx(C,{show:p,close:g,header:"Confirmation",body:`Do you want to delete ${i}?`,btn:"Delete",confirmAction:h})]})}export{Q as default};
